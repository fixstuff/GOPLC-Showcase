<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 580">
  <defs>
    <linearGradient id="primaryGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#00ADD8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#007d9c;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="backupGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4ecdc4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2ab7aa;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="supGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#a855f7;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="devGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ffe66d;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d4b93c;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="bossGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ff6b6b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c44545;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#1a1a2e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#16213e;stop-opacity:1" />
    </linearGradient>
    <marker id="arrowBlue" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#00ADD8"/>
    </marker>
    <marker id="arrowTeal" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#4ecdc4"/>
    </marker>
    <marker id="arrowPurple" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#a855f7"/>
    </marker>
    <marker id="arrowGreen" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#22c55e"/>
    </marker>
    <filter id="shadow">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="580" fill="url(#bgGrad)" rx="10"/>

  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="22" font-weight="bold">
    Redundancy &amp; Failover Architecture
  </text>
  <text x="450" y="55" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="12">
    Hot-standby redundancy with automatic failover and failback
  </text>

  <!-- PRIMARY EDGE CLUSTER -->
  <g filter="url(#shadow)">
    <rect x="30" y="75" width="390" height="195" fill="#222" rx="10" stroke="#00ADD8" stroke-width="2"/>
    <rect x="120" y="85" width="210" height="28" fill="url(#primaryGrad)" rx="6"/>
    <text x="225" y="105" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="13" font-weight="bold">Primary Edge Cluster</text>

    <!-- Minions -->
    <rect x="50" y="125" width="65" height="40" fill="url(#devGrad)" rx="5"/>
    <text x="82" y="142" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">CRAC</text>
    <text x="82" y="157" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="8">Minion</text>

    <rect x="125" y="125" width="65" height="40" fill="url(#devGrad)" rx="5"/>
    <text x="157" y="142" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">UPS</text>
    <text x="157" y="157" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="8">Minion</text>

    <rect x="200" y="125" width="65" height="40" fill="url(#devGrad)" rx="5"/>
    <text x="232" y="142" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">PDU</text>
    <text x="232" y="157" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="8">Minion</text>

    <rect x="275" y="125" width="65" height="40" fill="url(#devGrad)" rx="5"/>
    <text x="307" y="142" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">GEN</text>
    <text x="307" y="157" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="8">Minion</text>

    <rect x="350" y="125" width="55" height="40" fill="url(#devGrad)" rx="5"/>
    <text x="377" y="142" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">FIRE</text>
    <text x="377" y="157" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="8">Minion</text>

    <!-- Unix socket label -->
    <text x="225" y="183" text-anchor="middle" fill="#888" font-family="monospace" font-size="9">Unix Sockets (DataLayer TCP)</text>

    <!-- Edge Boss -->
    <rect x="130" y="195" width="190" height="40" fill="url(#bossGrad)" rx="6"/>
    <text x="225" y="215" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Edge Boss</text>
    <text x="225" y="230" text-anchor="middle" fill="#fff" font-family="monospace" font-size="9">API :8440 | DL :4240</text>

    <!-- Active badge -->
    <rect x="340" y="200" width="65" height="22" fill="#22c55e" rx="11" fill-opacity="0.2"/>
    <text x="372" y="215" text-anchor="middle" fill="#22c55e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">ACTIVE</text>
  </g>

  <!-- Arrows from minions to boss -->
  <line x1="82" y1="165" x2="175" y2="195" stroke="#ffe66d" stroke-width="1.5" stroke-opacity="0.5"/>
  <line x1="157" y1="165" x2="200" y2="195" stroke="#ffe66d" stroke-width="1.5" stroke-opacity="0.5"/>
  <line x1="232" y1="165" x2="225" y2="195" stroke="#ffe66d" stroke-width="1.5" stroke-opacity="0.5"/>
  <line x1="307" y1="165" x2="250" y2="195" stroke="#ffe66d" stroke-width="1.5" stroke-opacity="0.5"/>
  <line x1="377" y1="165" x2="275" y2="195" stroke="#ffe66d" stroke-width="1.5" stroke-opacity="0.5"/>

  <!-- BACKUP EDGE CLUSTER -->
  <g filter="url(#shadow)">
    <rect x="480" y="75" width="390" height="195" fill="#222" rx="10" stroke="#4ecdc4" stroke-width="2"/>
    <rect x="570" y="85" width="210" height="28" fill="url(#backupGrad)" rx="6"/>
    <text x="675" y="105" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="13" font-weight="bold">Backup Edge Cluster</text>

    <!-- Minions -->
    <rect x="500" y="125" width="65" height="40" fill="url(#devGrad)" rx="5"/>
    <text x="532" y="142" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">CRAC</text>
    <text x="532" y="157" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="8">Minion</text>

    <rect x="575" y="125" width="65" height="40" fill="url(#devGrad)" rx="5"/>
    <text x="607" y="142" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">UPS</text>
    <text x="607" y="157" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="8">Minion</text>

    <rect x="650" y="125" width="65" height="40" fill="url(#devGrad)" rx="5"/>
    <text x="682" y="142" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">PDU</text>
    <text x="682" y="157" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="8">Minion</text>

    <rect x="725" y="125" width="65" height="40" fill="url(#devGrad)" rx="5"/>
    <text x="757" y="142" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">GEN</text>
    <text x="757" y="157" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="8">Minion</text>

    <rect x="800" y="125" width="55" height="40" fill="url(#devGrad)" rx="5"/>
    <text x="827" y="142" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">FIRE</text>
    <text x="827" y="157" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="8">Minion</text>

    <!-- Unix socket label -->
    <text x="675" y="183" text-anchor="middle" fill="#888" font-family="monospace" font-size="9">Unix Sockets (DataLayer TCP)</text>

    <!-- Edge Boss -->
    <rect x="580" y="195" width="190" height="40" fill="url(#bossGrad)" rx="6"/>
    <text x="675" y="215" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Edge Boss</text>
    <text x="675" y="230" text-anchor="middle" fill="#fff" font-family="monospace" font-size="9">API :8450 | DL :4242</text>

    <!-- Standby badge -->
    <rect x="785" y="200" width="75" height="22" fill="#f97316" rx="11" fill-opacity="0.2"/>
    <text x="822" y="215" text-anchor="middle" fill="#f97316" font-family="Arial, sans-serif" font-size="10" font-weight="bold">STANDBY</text>
  </g>

  <!-- Arrows from minions to boss -->
  <line x1="532" y1="165" x2="625" y2="195" stroke="#ffe66d" stroke-width="1.5" stroke-opacity="0.5"/>
  <line x1="607" y1="165" x2="650" y2="195" stroke="#ffe66d" stroke-width="1.5" stroke-opacity="0.5"/>
  <line x1="682" y1="165" x2="675" y2="195" stroke="#ffe66d" stroke-width="1.5" stroke-opacity="0.5"/>
  <line x1="757" y1="165" x2="700" y2="195" stroke="#ffe66d" stroke-width="1.5" stroke-opacity="0.5"/>
  <line x1="827" y1="165" x2="725" y2="195" stroke="#ffe66d" stroke-width="1.5" stroke-opacity="0.5"/>

  <!-- SUPERVISOR -->
  <g filter="url(#shadow)">
    <rect x="270" y="310" width="360" height="100" fill="#222" rx="10" stroke="#a855f7" stroke-width="2"/>
    <rect x="345" y="320" width="210" height="28" fill="url(#supGrad)" rx="6"/>
    <text x="450" y="340" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="13" font-weight="bold">Supervisor Boss</text>

    <!-- State machine -->
    <rect x="290" y="358" width="65" height="22" fill="#334" rx="4"/>
    <text x="322" y="373" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="9">Init</text>

    <text x="362" y="373" text-anchor="middle" fill="#555" font-family="Arial, sans-serif" font-size="10">→</text>

    <rect x="375" y="358" width="75" height="22" fill="#334" rx="4" stroke="#22c55e" stroke-width="1"/>
    <text x="412" y="373" text-anchor="middle" fill="#22c55e" font-family="Arial, sans-serif" font-size="9">Monitor</text>

    <text x="460" y="373" text-anchor="middle" fill="#555" font-family="Arial, sans-serif" font-size="10">→</text>

    <rect x="472" y="358" width="75" height="22" fill="#334" rx="4"/>
    <text x="509" y="373" text-anchor="middle" fill="#ff6b6b" font-family="Arial, sans-serif" font-size="9">Failover</text>

    <text x="557" y="373" text-anchor="middle" fill="#555" font-family="Arial, sans-serif" font-size="10">→</text>

    <rect x="567" y="358" width="75" height="22" fill="#334" rx="4"/>
    <text x="604" y="373" text-anchor="middle" fill="#4ecdc4" font-family="Arial, sans-serif" font-size="9">Failback</text>

    <text x="450" y="402" text-anchor="middle" fill="#888" font-family="monospace" font-size="9">API :8460 | Heartbeat monitoring | MQTT telemetry</text>
  </g>

  <!-- Connection lines: Primary Boss → Supervisor -->
  <line x1="225" y1="235" x2="225" y2="290" stroke="#00ADD8" stroke-width="2"/>
  <line x1="225" y1="290" x2="370" y2="290" stroke="#00ADD8" stroke-width="2"/>
  <line x1="370" y1="290" x2="370" y2="310" stroke="#00ADD8" stroke-width="2" marker-end="url(#arrowBlue)"/>
  <text x="280" y="285" fill="#00ADD8" font-family="monospace" font-size="9">Health check</text>

  <!-- Connection lines: Backup Boss → Supervisor -->
  <line x1="675" y1="235" x2="675" y2="290" stroke="#4ecdc4" stroke-width="2"/>
  <line x1="675" y1="290" x2="530" y2="290" stroke="#4ecdc4" stroke-width="2"/>
  <line x1="530" y1="290" x2="530" y2="310" stroke="#4ecdc4" stroke-width="2" marker-end="url(#arrowTeal)"/>
  <text x="615" y="285" fill="#4ecdc4" font-family="monospace" font-size="9">Health check</text>

  <!-- DATA PIPELINE -->
  <g filter="url(#shadow)">
    <rect x="80" y="440" width="740" height="50" fill="#222" rx="8" stroke="#444" stroke-width="1"/>

    <!-- MQTT -->
    <rect x="100" y="450" width="90" height="30" fill="#334" rx="5" stroke="#22c55e" stroke-width="1"/>
    <text x="145" y="470" text-anchor="middle" fill="#22c55e" font-family="Arial, sans-serif" font-size="11" font-weight="bold">MQTT</text>

    <text x="207" y="470" text-anchor="middle" fill="#555" font-family="Arial, sans-serif" font-size="14">→</text>

    <!-- Node-RED -->
    <rect x="225" y="450" width="110" height="30" fill="#334" rx="5" stroke="#ff6b6b" stroke-width="1"/>
    <text x="280" y="470" text-anchor="middle" fill="#ff6b6b" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Node-RED</text>

    <text x="352" y="470" text-anchor="middle" fill="#555" font-family="Arial, sans-serif" font-size="14">→</text>

    <!-- InfluxDB -->
    <rect x="370" y="450" width="110" height="30" fill="#334" rx="5" stroke="#a855f7" stroke-width="1"/>
    <text x="425" y="470" text-anchor="middle" fill="#a855f7" font-family="Arial, sans-serif" font-size="11" font-weight="bold">InfluxDB</text>

    <text x="497" y="470" text-anchor="middle" fill="#555" font-family="Arial, sans-serif" font-size="14">→</text>

    <!-- Grafana -->
    <rect x="515" y="450" width="100" height="30" fill="#334" rx="5" stroke="#f39c12" stroke-width="1"/>
    <text x="565" y="470" text-anchor="middle" fill="#f39c12" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Grafana</text>

    <!-- Pipeline label -->
    <text x="700" y="465" text-anchor="middle" fill="#666" font-family="Arial, sans-serif" font-size="10">Failover</text>
    <text x="700" y="478" text-anchor="middle" fill="#666" font-family="Arial, sans-serif" font-size="10">Analysis</text>
  </g>

  <!-- Arrow from Supervisor to MQTT -->
  <line x1="450" y1="410" x2="450" y2="425" stroke="#a855f7" stroke-width="2"/>
  <line x1="450" y1="425" x2="145" y2="425" stroke="#a855f7" stroke-width="1.5"/>
  <line x1="145" y1="425" x2="145" y2="440" stroke="#a855f7" stroke-width="1.5" marker-end="url(#arrowPurple)"/>
  <text x="300" y="420" text-anchor="middle" fill="#888" font-family="monospace" font-size="9">Both clusters publish to MQTT</text>

  <!-- Security badge -->
  <rect x="80" y="510" width="350" height="50" fill="#181828" rx="8" stroke="#22c55e" stroke-width="1"/>
  <text x="105" y="532" fill="#22c55e" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Security:</text>
  <text x="165" y="532" fill="#888" font-family="Arial, sans-serif" font-size="11">Minions on Unix sockets</text>
  <text x="105" y="550" fill="#22c55e" font-family="monospace" font-size="10">18 TCP ports → 3 TCP ports (83% reduction)</text>

  <!-- Data loss badge -->
  <rect x="470" y="510" width="350" height="50" fill="#181828" rx="8" stroke="#4ecdc4" stroke-width="1"/>
  <text x="495" y="532" fill="#4ecdc4" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Reliability:</text>
  <text x="570" y="532" fill="#888" font-family="Arial, sans-serif" font-size="11">Store-and-forward buffering</text>
  <text x="495" y="550" fill="#4ecdc4" font-family="monospace" font-size="10">Zero data loss during failover</text>
</svg>
